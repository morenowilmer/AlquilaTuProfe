<app-spinner *ngIf="loading"></app-spinner>

<div fxFill fxLayoutAlign="center center">
  <mat-card [class.mat-elevation-z8]="true" class="login" fxFlex="40%" fxFlex.lt-md="90%">
    <!-- Formulario -->
    <form fxFlex [formGroup]="formularioLogin" (ngSubmit)="login()">
      <div fxFlex fxLayout="column" fxLayoutAlign="space-between center">
        <!-- Logo -->
        <div fxFlex="30%" fxLayoutAlign="center center" class="columna ancho-total">
          <img [src]="logo" alt="logo" />
        </div>
        <!-- Usuario y contraseña -->
        <div class="ancho-total" fxFlex="50%" fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="2rem">
          <!-- Usuario -->
          <div fxFlex fxLayout="row" fxLayoutAlign="baseline center" fxLayoutGap="0.5rem" class="ancho-total">
            <mat-icon>person</mat-icon>
            <mat-form-field fxFlex="grow" class="ancho-total">
              <mat-label>Usuario</mat-label>
              <input id="usuario" matInput type="text" formControlName="usuario" class="transformacion-texto"
                (blur)="guardarLocal()" />
              <mat-icon matSuffix (click)="limpiarInputs('usuario')">close</mat-icon>
              <mat-error *ngIf="
                  this.formularioLogin.get('usuario')?.touched &&
                  this.formularioLogin.get('usuario')?.invalid
                ">
                {{ revisarRN('usuario') }}
              </mat-error>
            </mat-form-field>
          </div>
          <!-- Contraseña -->
          <div fxFlex fxLayout="row" fxLayoutAlign="baseline center" fxLayoutGap="0.5rem" class="ancho-total">
            <mat-icon>lock</mat-icon>
            <mat-form-field fxFlex class="ancho-total">
              <mat-label>Contraseña</mat-label>
              <input id="contraseña" class="input-contrasena" matInput [type]="tipoInput"
                formControlName="contrasena" />
              <div fxLayout="row" fxLayoutGap="0.5rem" matSuffix>
                <mat-icon (click)="cambiarTipo()">remove_red_eye</mat-icon>
                <mat-icon (click)="limpiarInputs('contrasena')">close</mat-icon>
              </div>
              <mat-error *ngIf="
                  this.formularioLogin.get('contrasena')?.touched &&
                  this.formularioLogin.get('contrasena')?.invalid
                ">
                {{ revisarRN('contrasena') }}
              </mat-error>
            </mat-form-field>
          </div>

          <mat-menu>
            <a [routerLink]="['/registrar']" mat-menu-item>Registrar</a>
          </mat-menu>
        </div>
        <!-- Borón de ingreso -->
        <div class="ancho-btn" fxLayoutAlign="center center" fxFlex="20%">
          <button fxFlex mat-raised-button type="submit" class="boton-aceptacion" [disabled]="formularioLogin.invalid">
            Ingresar
          </button>
        </div>
      </div>
    </form>
  </mat-card>
</div>